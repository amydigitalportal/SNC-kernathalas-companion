<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SNC Ker Nathalas Companion App</title>
    <link rel="stylesheet" href="styles.css">
</head>

<style>
    body {
        background-image: url('assets/wallpaper.png');
        color: white;
    }

    .txt-shadow {
        text-shadow: 
            2px    2px    2px   rgba(0, 0, 0, 0.75),
            2px    0px    25px  rgba(0, 0, 0, 0.8), 
            0px   -2px    5px   rgba(0, 0, 128, 0.85);
    }

    .hero {
        text-align: center;
        padding: 2rem;
        /* background-color: #f0f0f0; */
        border-radius: 8px;
        margin: 0 auto;
        max-width: 600px;
    }
    
    .hero div {
        font-size: 1.5rem;
        font-weight: bold;
    }

    #hero-logo {
        width: 70%;
        height: auto;
        display: block;
        margin: 0 auto;
    }

    .instructions-tip {
        font-size: 1.2rem;
        margin: 0 0;
        text-align: center;
    }

    #button-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 1rem;
        width: 80%;
        margin: 0 auto;
        gap: 1rem;
    }

    #button-container > div > * {
        display: block;
        width: 100%;
    }

    .hidden {
        display: none !important;
    }

    .button-group {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1rem;
        gap: 0.5rem;

        width: 80%;            /* üëà set the width */
        margin: 0 auto;         /* üëà center horizontally */

        background: rgba(0, 0, 0, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }

	.btn {
		padding: 0.5em 1em;
		font-size: 1rem;
		border-radius: 4px;
		border: none;
		cursor: pointer;
		background-color: #007bff;
		color: white;
	}

	.theme-button {
		background-color: #333;
		color: white;
	}
</style>

<template id="themed-button-template">
    <button class="btn theme-button"></button>
</template>
<!-- Declarations, globals, function defs -->
<script>

const CORRIDOR_DESCRIPTIONS = {
	1: "The air is heavy with ancient dust, and the walls are lined with cobwebs. The faint echoes of distant footsteps can be heard.",
	2: "Flickering torches cast eerie shadows on the stone walls. The air is damp, and the occasional drip of water can be heard.",
	3: "The tunnel is barely wide enough for a single person to pass through. The walls are lined with ancient burial niches, some of which have been disturbed. You‚Äôre not sure if from within or without‚Ä¶",
	4: "Thick moss covers the damp stone walls, giving the corridor an eerie green glow. The sound of water dripping echoes throughout.",
	5: "The passage is partially blocked by a cave-in, with rubble and debris scattered across the floor. Dim light filters through cracks in the ceiling.",
	6: "The walls are adorned with elaborate tomb reliefs and carved epitaphs. The air feels heavy with the presence of the long-departed.",
	7: "The narrow stone hall twists and turns, disappearing into darkness. The hall seems to have a slight downwards inclination, and it feels worn and slippery.",
	8: "The air here is stale, and the sound of rats scurrying can be heard in the distance.",
	9: "An eerie silence fills this corridor, broken only by the faint whispers of long-dead spirits. The air is heavy with an otherworldly stillness.",
	10: "Strange luminescent fungi cover the walls, casting an ethereal glow. The tunnel twists and turns, creating an unsettling sense of disorientation.",
	11: "This wide corridor is lined with towering statues and ornate sarcophagi. Faded tapestries hang from the ceiling, telling stories of ancient rulers.",
	12: "The tunnel is partially submerged in water, with small ripples disturbing its still surface. The faint odor of decay permeates the air.",
	13: "A hidden alcove branches off from the main passage, housing a forgotten altar or a small shrine. Dust-covered offerings lie undisturbed.",
	14: "Strange symbols are etched onto the walls of this hall, possibly indicating directions.",
	15: "The walls of this tunnel bear scorch marks, evidence of past fire or magical explosions. The air carries a faint smell of burnt wood and stone.",
	16: "Time and decay have taken their toll on this corridor, with crumbling walls and ceilings. It feels unstable and prone to collapse.",
	17: "Faint whispers and hushed voices fill the air, voices carried through time.",
	18: "The stench of decay is overpowering in this tunnel, infested with ravenous vermin that lurk in the shadows.",
	19: "Intricate carvings adorn the walls, depicting scenes of ancient rituals and funerary rites. The air is heavy with a sense of solemnity and reverence.",
	20: "The corridor seems to shimmer with an otherworldly glow. Transparent figures of long-dead souls can be seen drifting through the walls, oblivious to the living."
};

const ROOM_DESCRIPTIONS = {
	1: "Rusty iron shackles hang from the walls, and the floor is littered with the remains of those who suffered unspeakable agony.",
	2: "This regal hall is filled with shattered marble thrones, a stark reminder of the empire's fallen rulers and the broken legacy they left behind.",
	3: "Eerie whispers fill the air in this dimly lit crypt, where the tormented spirits of the empire's cursed rulers still roam in eternal restlessness.",
	4: "The stone altar in the center of the room is covered in dried blood, a chilling testament to the dark rituals that once took place here.",
	5: "A vast network of burial niches houses the remains of countless forgotten souls, their existence erased from history.",
	6: "Chains of all sizes hang from the ceiling, the clinking sound echoing like a haunting melody in this hall of imprisonment.",
	7: "Sculptures of mournful figures adorn the walls, each seemingly caught in an eternal state of sorrow and despair.",
	8: "The room is perpetually shrouded in darkness, where even torches struggle to dispel the oppressive gloom.",
	9: "Tombstones and coffins line the walls, bearing the names of lovers separated by death, forever longing for each other's embrace.",
	10: "Useless trinkets and baubles lie scattered about, remnants of the once-great Vaelorian Ascendancy now reduced to forgotten relics.",
	11: "This room seems to have been blasted by a source of water for millennia, since all the surfaces are smooth and slippery.",
	12: "An opulent throne sits empty in the center of this chamber, surrounded by dust and decay, a symbol of the empire's fallen glory.",
	13: "Echoes of anguished cries reverberate through this room, as if the walls themselves are weeping for the tragedies that unfolded within.",
	14: "Foul, withered plants and skeletal trees twist and reach for sunlight that will never touch them.",
	15: "A pitch-black room that gives the illusion of extending infinitely downward, leaving those who enter with an overwhelming sense of dread.",
	16: "This crypt room holds the remains of those cursed to eternal damnation, their souls forever trapped in this unholy place.",
	17: "A massive, ominous statue looms over the room, depicting a malevolent deity once worshiped by the empire's rulers.",
	18: "Ghostly apparitions drift through these halls, their faint whispers offering cryptic warnings and messages.",
	19: "An ancient stone altar dominates the room, surrounded by blood-stained grooves where countless offerings met their end.",
	20: "This room houses the remains of traitors and turncoats, eternally damned for their betrayal of the empire.",
	21: "Dark, arcane symbols cover the walls, hinting at the dark rituals once conducted within these unhallowed grounds.",
	22: "The bones of the empire's most wicked are piled high in this macabre display of death's inevitability.",
	23: "An eerie ticking fills the air as an ancient, enchanted clock counts down the minutes to oblivion.",
	24: "Any sound uttered within this hall fades into nothingness, as if the room devours all noise.",
	25: "Broken vials, shattered beakers, and rotting experiments reveal an alchemist's ill-fated pursuit of forbidden knowledge.",
	26: "Ancient scrolls and tomes rest on dust-covered shelves. Touching any of them quickly turns them into piles of dust.",
	27: "The stench of death hangs heavy in this room. Judging by some carvings, the Vaelorians disposed of their enemies in mass graves right here.",
	28: "A morbid altar stands before a statue of a martyr who endured unimaginable pain in the name of faith.",
	29: "The remains of a once-grand spire lie in ruin, a monument to a forgotten hero of the Vaelorian Ascendancy.",
	30: "As you enter this room, haunting visions and terrifying illusions assault you.",
	31: "Dark rituals once performed here have left an indelible mark on the walls, perpetually tainted by the essence of necromancy.",
	32: "The shadows of tormented souls replay their darkest moments in an eternal loop, forever haunted by their past actions.",
	33: "Ancient weapons and armor line the walls, too old and brittle to be of any use to you.",
	34: "The walls bear ghostly imprints of anguished faces, as if the room captures the final moments of those who met a tragic end.",
	35: "Shadows move independently from their sources, dancing across the walls like malevolent spirits.",
	36: "A still, black pool reflects the darkest aspects of one's soul, showing the horrors hidden within.",
	37: "Mirrors shattered into jagged pieces create a disorienting effect, distorting reality and reflecting haunting images.",
	38: "An eerie aura permeates this room, where the empire once sought answers from a cryptic and enigmatic oracle.",
	39: "Statues of macabre figures surround a central platform, where dark ceremonies once called upon malevolent powers.",
	40: "A large crack in the room‚Äôs floor reveals a deep, dark abysm.",
	41: "This room holds within it an unholy shrine dedicated to dark forces.",
	42: "No sound can be heard in this room, not even the slightest whisper, creating an unsettling atmosphere of absolute quiet.",
	43: "This seems to be the final resting place of an emperor who history has forgotten, his name erased from all records.",
	44: "Broken chandeliers hang from the ceiling, and tattered banners once heralded celebrations now lay in ruin.",
	45: "Heat emanates from this room, and you can see the glow of lava in a corner, the viscous material dripping from a crack on the wall.",
	46: "An eerie, dim light filters through an enchanted glass ceiling, casting an otherworldly twilight over the room.",
	47: "Mirrors made from dark, reflective obsidian distort your reflection, your lightsource casting haunting shadows.",
	48: "Shrines to deities long abandoned by worshippers now stand in silence, their names etched into forgotten prayer tablets.",
	49: "Ancient telescopes and stargazing instruments remain untouched, though the stars they once observed have long changed.",
	50: "A once-powerful empress was buried here, her empty sarcophagus adorned with gilded glyphs.",
    51: "The room is plagued by an unnatural, freezing chill that numbs the bones as soon as you enter.",
	52: "Broken vials and failed experiments litter the room, reminders of the desperate and deadly alchemical pursuits.",
	53: "An overgrown courtyard now serves as a graveyard, with tombstones dotting the landscape where once joyous celebrations took place.",
	54: "Twisted and grotesque sculptures rest on pedestals, each representing the artist's descent into madness.",
	55: "The apparitions of those who died seeking revenge are trapped in this room, their anger seething for eternity.",
	56: "Taxidermy displays of long-extinct creatures and monstrous beasts line the walls, their glass eyes seemingly alive.",
	57: "The faint sounds of mournful music fill the air, emanating from unseen instruments in this haunted room.",
	58: "This chamber once housed the living quarters of a family of servants. Faint children‚Äôs drawings can be seen on the walls.",
	59: "This room houses a shrine dedicated to a lunar deity. Its worshipers once performed heinous acts under the cursed moon's glow.",
	60: "A large crypt, where the sound of mourning and weeping echoes endlessly.",
	61: "A chamber once dedicated to studying the stars, now abandoned and covered in dust.",
	62: "Phantom weapons float in the air, suspended in an unsettling display of ethereal power.",
	63: "Plans for grand structures, some never built, while others bore terrible secrets, now rest here with the remains of their creator.",
	64: "Statues of once-lovely nymphs are now twisted and grotesque, surrounded by thorns and brambles.",
	65: "This once-imposing chamber is now decayed and crumbling, a symbol of the empire's decline.",
	66: "A series of arcane symbols that you‚Äôve never encountered before cover the walls of this chamber.",
	67: "Phantom wails fill the air, as the spirits of wronged women lament their tragic fates.",
	68: "An ancient, corrupted forge where weapons were crafted from the souls of the fallen.",
	69: "The statues of weeping angels line this hall, their faces eternally frozen in grief.",
	70: "The resting place of an heir to the empire, whose lineage has been lost to history.",
	71: "The walls are adorned with eerie petrified faces that seem to whisper secrets to those who listen.",
	72: "This chamber is made entirely of black stone, and any light that enters is quickly swallowed by its darkness.",
	73: "An ornate stone chalice sits on an altar. It appears to have been fused to it by some extreme heat.",
	74: "This room‚Äôs walls are covered with the tattered remains of ancient heraldic banners.",
	75: "At the center of this room, a seemingly bottomless pit drops into the darkness, its true depth a mystery that strikes fear into your heart.",
	76: "An otherworldly mist fills the room, giving glimpses of fleeting, forgotten dreams from the past.",
	77: "A cursed oracle once dwelt here, their prophecies leading to doom and despair for those who sought answers.",
	78: "A dark and foreboding courtyard where twisted shadows play tricks on the mind.",
	79: "The room is filled with the remains of lovers forever entwined in death, their skeletal hands locked in an eternal embrace.",
	80: "An otherworldly chamber where the boundaries between dimensions blur, allowing glimpses into distant realms.",
	81: "Horrifying paintings and sculptures depict scenes of unimaginable suffering and torment.",
	82: "This room has a well in a corner, but the water within it is clearly tainted with an eerie glow.",
	83: "This chamber is completely covered in fungi and mold of all kinds, making every step feel as if you‚Äôre walking on a thick rug.",
	84: "Small, empty cells line the walls of this room.",
	85: "The walls are adorned with macabre paintings depicting brutal executions and violent sacrifices.",
	86: "Sealed off for centuries, this room contains unspeakable horrors that were best left undisturbed.",
	87: "An eerie fountain still trickling water is at the center of the room, a peaceful, almost out of place view.",
	88: "Disorienting illusions assault you momentarily as you step into this room, showing you images of your past.",
	89: "This room was once a treasure vault filled with riches, but it has long since been ransacked.",
	90: "A once-lavish parlor now lies in ruin, its grandeur replaced by decay and the stench of death.",
	91: "Rotten piles of furniture and rusted utensils are all you can see in this room.",
	92: "The walls are covered in soot and fire marks, clearly indicating that a great fire took place here.",
	93: "This room is completely empty, except for a thick layer of dust. A set of human footprints can be seen across the room.",
	94: "As you enter this hall you feel an overwhelming sense of hopelessness, as if all optimism is slowly being drained from your heart.",
	95: "A chamber adorned with gold and jewels. A closer look reveals them to be just paint and glass.",
	96: "A once-revered shrine now stands in darkness, forgotten by all but malevolent entities.",
	97: "Statues of ancient warriors stand guard, their once-pristine surfaces now marred by crimson stains.",
	98: "Old iron ingots are piled in a corner of this room, each one of them marked with the seal of an ancient house.",
	99: "An unnatural wind seems to be constantly coming out of this room, violently flapping your clothes and gear around you.",
	100: "An unquenchable, ghostly flame flickers and dances, casting eerie shadows on the walls, forever burning but never consuming."
};


function createButton({ id, text, classList = [], onClick }) {
	const template = document.getElementById("themed-button-template");
	const clone = template.content.cloneNode(true);
	const button = clone.querySelector("button");

	button.id = id;
	button.textContent = text;
	classList.forEach(cls => button.classList.add(cls));
	if (typeof onClick === "function") {
		button.addEventListener("click", onClick);
	}
	return button;
}

function createTextSpan({ id, text = "-", classList = [] }) {
	const span = document.createElement("span");
	span.id = id;
	span.textContent = text;
	classList.forEach(cls => span.classList.add(cls));
	return span;
}

function createButtonGroup({ id, text, range, onClick }) {
	const groupWrapper = document.createElement("div");
	groupWrapper.id = id;
	groupWrapper.classList.add("button-group");

	const resultSpan = createTextSpan({
		id: `${id}-result`,
		text: "-",
		classList: ["text", "result-text"]
	});

	const flavorSpan = createTextSpan({
		id: `${id}-flavor`,
		text: "",
		classList: ["text", "flavor-text"]
	});

	const button = createButton({
		id: `${id}-btn`,
		text,
		classList: ["btn", "theme-button"],
		onClick: () => onClick(resultSpan, flavorSpan)
	});

	groupWrapper.appendChild(button);
	groupWrapper.appendChild(resultSpan);
	groupWrapper.appendChild(flavorSpan);
	return groupWrapper;
}

function randomNumber(min, max) {
	return Math.floor(Math.random() * (max - min + 1)) + min;
}

function resetButtonGroup(id) {
	const resultEl = document.getElementById(`${id}-result`);
	const flavorEl = document.getElementById(`${id}-flavor`);
	if (resultEl) resultEl.textContent = "-";
	if (flavorEl) flavorEl.textContent = "";
}

function showGroup(id) {
	const el = document.getElementById(id);
	if (el) el.classList.remove("hidden");
}

function hideGroup(id) {
	const el = document.getElementById(id);
	if (el) {
		el.classList.add("hidden");
		resetButtonGroup(id); // ‚¨ÖÔ∏è Reset when hidden
	}
}

function resetAllGroups(groupIds) {
	groupIds.forEach(hideGroup); // hides and resets
}
</script>

<body>
    <header>

    </header>
    <main>
        <div class="hero txt-shadow">
            <div style="font-size: 18px;">Squeak N Coozy's</div>
            <img id="hero-logo" src="assets/kn-logo-borderized.png" alt="SNC Ker Nathalas Logo">
            <div style="font-size: 36px;">Companion App</div>
        </div>
        

        <div class="txt-shadow">
            <p class="instructions-tip">Use the buttons below to roll dice or perform other actions.</p>
        </div>

<script>


window.onload = () => {
	const container = document.createElement("div");
	container.id = "button-container";
	document.body.appendChild(container);

	const phaseGroups = [
		"corr-desc-group",
		"room-desc-group",
		"encounter-group",
		"monster-table-group",
		"monster-select-group",
		"event-group"
	];

	// Phase 1: Exploration
	const explorationGroup = createButtonGroup({
		id: "exploration-group",
		text: "Exploration (d100)",
		range: [1, 100],
		onClick: (result, flavor) => {
			const roll = randomNumber(1, 100);
			const isRoom = roll > 25;
			result.textContent = `${isRoom ? "ROOM" : "CORRIDOR"} (${roll})`;
			flavor.textContent = isRoom ? "Boon or Doom?" : "This is a spooky corridor.";

			// Hide and reset all downstream groups
			resetAllGroups(phaseGroups);

			if (isRoom) {
				showGroup("room-desc-group");
				showGroup("encounter-group");
			} else {
				showGroup("corr-desc-group");
			}
		}
	});
	container.appendChild(explorationGroup);

	// Phase 2a: Corridor Description
	const corrDescGroup = createButtonGroup({
		id: "corr-desc-group",
		text: "Corridor Description (d20)",
		range: [1, 20],
		onClick: (result, flavor) => {
			const roll = randomNumber(1, 20);
			result.textContent = `# ${roll}`;
			flavor.textContent = CORRIDOR_DESCRIPTIONS[roll] || "The corridor is eerily quiet.";
		}
	});
	corrDescGroup.classList.add("hidden");
	container.appendChild(corrDescGroup);

	// Phase 2b: Room Description
	const roomDescGroup = createButtonGroup({
		id: "room-desc-group",
		text: "Room Description (d100)",
		range: [1, 100],
		onClick: (result, flavor) => {
			const roll = randomNumber(1, 100);
			result.textContent = `# ${roll}`;
			flavor.textContent = ROOM_DESCRIPTIONS[roll] || "A silent and empty room.";
		}
	});
	roomDescGroup.classList.add("hidden");
	container.appendChild(roomDescGroup);

	// Phase 3: Encounter
	const encounterGroup = createButtonGroup({
		id: "encounter-group",
		text: "Encounter (d20)",
		range: [1, 20],
		onClick: (result, flavor) => {
			const roll = randomNumber(1, 20);
			result.textContent = `${roll}`;
			if (roll >= 15) {
				showGroup("monster-table-group");
				hideGroup("event-group");
			} else {
				showGroup("event-group");
				hideGroup("monster-table-group");
				hideGroup("monster-select-group");
			}
		}
	});
	encounterGroup.classList.add("hidden");
	container.appendChild(encounterGroup);

	// Phase 4a: Monster Table
	const monsterTableGroup = createButtonGroup({
		id: "monster-table-group",
		text: "Monster Table (d6)",
		range: [1, 6],
		onClick: (result, flavor) => {
			const roll = randomNumber(1, 6);
			result.textContent = roll;
			flavor.textContent = roll <= 3 ? "Use Table A" : "Use Table B";
			showGroup("monster-select-group");
		}
	});
	monsterTableGroup.classList.add("hidden");
	container.appendChild(monsterTableGroup);

	// Phase 4b: Monster Select
	const monsterSelectGroup = createButtonGroup({
		id: "monster-select-group",
		text: "Monster (d20)",
		range: [1, 20],
		onClick: (result, flavor) => {
			const roll = randomNumber(1, 20);
			result.textContent = `PLACEHOLDER MONSTER DESCRIPTION (${roll})`;
			flavor.textContent = "";
		}
	});
	monsterSelectGroup.classList.add("hidden");
	container.appendChild(monsterSelectGroup);

	// Phase 4c: Event Table
	const eventGroup = createButtonGroup({
		id: "event-group",
		text: "Event (d100)",
		range: [1, 100],
		onClick: (result, flavor) => {
			const roll = randomNumber(1, 100);
			result.textContent = `PLACEHOLDER EVENT DESCRIPTION (${roll})`;
			flavor.textContent = "";
		}
	});
	eventGroup.classList.add("hidden");
	container.appendChild(eventGroup);
};
</script>


</html>